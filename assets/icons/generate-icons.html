<!DOCTYPE html>
<html lang="en" data-security-level="high">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
    <title>üîê CipherVault Icon Generator - Secure PWA Icons</title>
    <style>
        /* SECURE ICON GENERATOR STYLES */
        :root {
            --secure-primary: #0d47a1;
            --secure-secondary: #1565c0;
            --secure-tertiary: #1976d2;
            --secure-bg: #0a0a0a;
            --secure-card: #111111;
            --secure-text: #ffffff;
            --secure-border: rgba(13, 71, 161, 0.3);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'SF Pro Display', 'Segoe UI', system-ui, sans-serif;
            background: var(--secure-bg);
            color: var(--secure-text);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .security-header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, rgba(13, 71, 161, 0.1), rgba(21, 101, 192, 0.05));
            border-radius: 20px;
            border: 1px solid var(--secure-border);
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }
        
        .security-header::before {
            content: 'üîí';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 48px;
            opacity: 0.1;
        }
        
        .security-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--secure-primary), var(--secure-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .security-badge {
            display: inline-block;
            background: rgba(13, 71, 161, 0.2);
            color: var(--secure-primary);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin: 10px 0;
            border: 1px solid var(--secure-border);
        }
        
        .secure-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .secure-grid {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
        }
        
        @media (max-width: 768px) {
            .secure-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* SIDEBAR CONTROLS */
        .secure-sidebar {
            background: var(--secure-card);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid var(--secure-border);
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        .control-group {
            margin-bottom: 30px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--secure-text);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .color-pickers {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .color-picker {
            position: relative;
        }
        
        .color-picker input {
            width: 100%;
            height: 50px;
            border: 2px solid var(--secure-border);
            border-radius: 10px;
            background: transparent;
            cursor: pointer;
        }
        
        .color-picker span {
            position: absolute;
            bottom: -25px;
            left: 0;
            font-size: 12px;
            color: #888;
        }
        
        select, input[type="range"] {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--secure-border);
            border-radius: 8px;
            color: var(--secure-text);
            font-size: 14px;
        }
        
        select:focus, input[type="range"]:focus {
            outline: 2px solid var(--secure-primary);
            outline-offset: 2px;
        }
        
        /* PREVIEW AREA */
        .preview-area {
            background: var(--secure-card);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid var(--secure-border);
        }
        
        .icon-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .icon-preview-item {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--secure-border);
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .icon-preview-item:hover {
            transform: translateY(-5px);
            border-color: var(--secure-primary);
            box-shadow: 0 10px 30px rgba(13, 71, 161, 0.2);
        }
        
        .icon-preview-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--secure-primary), var(--secure-secondary));
        }
        
        .icon-canvas {
            width: 100px;
            height: 100px;
            margin: 0 auto 15px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .icon-info {
            font-size: 12px;
            color: #888;
            margin-top: 10px;
        }
        
        /* BUTTONS */
        .secure-button {
            display: block;
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--secure-primary), var(--secure-secondary));
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 0;
            text-align: center;
            text-decoration: none;
        }
        
        .secure-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(13, 71, 161, 0.4);
        }
        
        .secure-button.secondary {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--secure-border);
        }
        
        .secure-button.secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* DOWNLOAD SECTION */
        .download-section {
            margin-top: 40px;
            padding: 30px;
            background: rgba(13, 71, 161, 0.05);
            border-radius: 16px;
            border: 1px solid var(--secure-border);
        }
        
        .download-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .download-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--secure-border);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
        }
        
        .download-item:hover {
            background: rgba(13, 71, 161, 0.1);
            border-color: var(--secure-primary);
        }
        
        .download-item canvas {
            width: 32px;
            height: 32px;
            border-radius: 8px;
        }
        
        .download-info {
            flex: 1;
        }
        
        .download-info div:first-child {
            font-weight: 600;
            font-size: 14px;
        }
        
        .download-info div:last-child {
            font-size: 11px;
            color: #888;
        }
        
        /* STRUCTURE PREVIEW */
        .structure-preview {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'SF Mono', 'Roboto Mono', monospace;
            font-size: 12px;
            line-height: 1.8;
            overflow-x: auto;
            border: 1px solid var(--secure-border);
        }
        
        /* SECURITY NOTES */
        .security-notes {
            background: rgba(13, 71, 161, 0.05);
            border-left: 4px solid var(--secure-primary);
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin: 30px 0;
            font-size: 14px;
        }
        
        .security-notes ul {
            padding-left: 20px;
            margin: 10px 0;
        }
        
        .security-notes li {
            margin: 5px 0;
            color: #aaa;
        }
    </style>
</head>
<body>
    <div class="security-header">
        <h1>üîê CipherVault Icon Generator</h1>
        <div class="security-badge">SECURITY LEVEL: MAXIMUM</div>
        <p>Generate secure PWA icons with military-grade encryption visualization</p>
    </div>
    
    <div class="secure-container">
        <div class="secure-grid">
            <!-- SIDEBAR CONTROLS -->
            <div class="secure-sidebar">
                <div class="control-group">
                    <label>ENCRYPTION COLORS</label>
                    <div class="color-pickers">
                        <div class="color-picker">
                            <input type="color" id="primaryColor" value="#0d47a1">
                            <span>Primary Layer</span>
                        </div>
                        <div class="color-picker">
                            <input type="color" id="secondaryColor" value="#1565c0">
                            <span>Secondary Layer</span>
                        </div>
                    </div>
                </div>
                
                <div class="control-group">
                    <label>ICON STYLE</label>
                    <select id="iconStyle">
                        <option value="shield">Shield (Recommended)</option>
                        <option value="lock">Advanced Lock</option>
                        <option value="layers">Encryption Layers</option>
                        <option value="modern">Modern Security</option>
                        <option value="classic">Classic Vault</option>
                        <option value="minimal">Minimal Secure</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label>ENCRYPTION DEPTH</label>
                    <input type="range" id="encryptionDepth" min="1" max="5" value="3">
                    <div style="display: flex; justify-content: space-between; font-size: 12px; color: #888; margin-top: 5px;">
                        <span>Basic</span>
                        <span>Maximum</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label>SECURITY LEVEL</label>
                    <select id="securityLevel">
                        <option value="standard">Standard (72x72 - 512x512)</option>
                        <option value="extended">Extended (+ iOS Sizes)</option>
                        <option value="complete">Complete (All Platform Sizes)</option>
                    </select>
                </div>
                
                <button class="secure-button" onclick="generateAllIcons()">
                    üîÑ GENERATE SECURE ICONS
                </button>
                
                <button class="secure-button secondary" onclick="downloadAllIcons()">
                    ‚¨áÔ∏è DOWNLOAD ALL ICONS (ZIP)
                </button>
                
                <div class="security-notes">
                    <strong>Security Requirements:</strong>
                    <ul>
                        <li>Icons include encrypted watermark patterns</li>
                        <li>Each icon contains tamper-detection markers</li>
                        <li>Optimized for PWA manifest validation</li>
                        <li>Cross-browser compatible rendering</li>
                        <li>Includes transparent and opaque versions</li>
                    </ul>
                </div>
            </div>
            
            <!-- PREVIEW AREA -->
            <div class="preview-area">
                <h2 style="margin-bottom: 20px;">üîç Icon Preview & Validation</h2>
                
                <div class="icon-preview-grid" id="iconPreview">
                    <!-- Icons will be generated here -->
                </div>
                
                <div class="download-section">
                    <h3 style="margin-bottom: 20px;">üìÅ Download Individual Icons</h3>
                    <div class="download-grid" id="downloadLinks">
                        <!-- Download links will appear here -->
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <h4>üìÅ Required Directory Structure:</h4>
                        <div class="structure-preview">
assets/icons/
‚îú‚îÄ‚îÄ icon-72x72.png
‚îú‚îÄ‚îÄ icon-96x96.png
‚îú‚îÄ‚îÄ icon-128x128.png
‚îú‚îÄ‚îÄ icon-144x144.png
‚îú‚îÄ‚îÄ icon-152x152.png
‚îú‚îÄ‚îÄ icon-192x192.png
‚îú‚îÄ‚îÄ icon-256x256.png
‚îú‚îÄ‚îÄ icon-384x384.png
‚îú‚îÄ‚îÄ icon-512x512.png
‚îú‚îÄ‚îÄ apple-touch-icon.png
‚îú‚îÄ‚îÄ maskable-icon.png
‚îî‚îÄ‚îÄ favicon.ico
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // SECURE ICON GENERATOR SCRIPT
        'use strict';
        
        // Required PWA icon sizes
        const iconSizes = {
            standard: [
                { size: 72, name: 'icon-72x72.png' },
                { size: 96, name: 'icon-96x96.png' },
                { size: 128, name: 'icon-128x128.png' },
                { size: 144, name: 'icon-144x144.png' },
                { size: 152, name: 'icon-152x152.png' },
                { size: 192, name: 'icon-192x192.png' },
                { size: 384, name: 'icon-384x384.png' },
                { size: 512, name: 'icon-512x512.png' }
            ],
            extended: [
                { size: 57, name: 'apple-touch-icon-57x57.png' },
                { size: 60, name: 'apple-touch-icon-60x60.png' },
                { size: 72, name: 'apple-touch-icon-72x72.png' },
                { size: 76, name: 'apple-touch-icon-76x76.png' },
                { size: 114, name: 'apple-touch-icon-114x114.png' },
                { size: 120, name: 'apple-touch-icon-120x120.png' },
                { size: 144, name: 'apple-touch-icon-144x144.png' },
                { size: 152, name: 'apple-touch-icon-152x152.png' },
                { size: 180, name: 'apple-touch-icon-180x180.png' },
                { size: 192, name: 'icon-192x192.png' },
                { size: 512, name: 'icon-512x512.png' }
            ],
            complete: [
                // Android/Chrome
                { size: 36, name: 'icon-36x36.png' },
                { size: 48, name: 'icon-48x48.png' },
                { size: 72, name: 'icon-72x72.png' },
                { size: 96, name: 'icon-96x96.png' },
                { size: 128, name: 'icon-128x128.png' },
                { size: 144, name: 'icon-144x144.png' },
                { size: 152, name: 'icon-152x152.png' },
                { size: 192, name: 'icon-192x192.png' },
                { size: 256, name: 'icon-256x256.png' },
                { size: 384, name: 'icon-384x384.png' },
                { size: 512, name: 'icon-512x512.png' },
                // iOS
                { size: 180, name: 'apple-touch-icon.png' },
                // Windows
                { size: 70, name: 'mstile-70x70.png' },
                { size: 144, name: 'mstile-144x144.png' },
                { size: 150, name: 'mstile-150x150.png' },
                { size: 310, name: 'mstile-310x310.png' },
                { size: 310, name: 'mstile-310x150.png' },
                // Maskable
                { size: 192, name: 'maskable-icon-192x192.png' },
                { size: 512, name: 'maskable-icon-512x512.png' }
            ]
        };
        
        // Generate all icons
        function generateAllIcons() {
            const primaryColor = document.getElementById('primaryColor').value;
            const secondaryColor = document.getElementById('secondaryColor').value;
            const style = document.getElementById('iconStyle').value;
            const securityLevel = document.getElementById('securityLevel').value;
            const encryptionDepth = parseInt(document.getElementById('encryptionDepth').value);
            
            const sizes = iconSizes[securityLevel];
            const preview = document.getElementById('iconPreview');
            const downloadLinks = document.getElementById('downloadLinks');
            
            preview.innerHTML = '';
            downloadLinks.innerHTML = '';
            
            sizes.forEach(icon => {
                // Create preview item
                const previewItem = document.createElement('div');
                previewItem.className = 'icon-preview-item';
                
                // Create canvas for preview
                const previewCanvas = document.createElement('canvas');
                previewCanvas.width = 100;
                previewCanvas.height = 100;
                previewCanvas.className = 'icon-canvas';
                
                // Create actual size canvas for download
                const downloadCanvas = document.createElement('canvas');
                downloadCanvas.width = icon.size;
                downloadCanvas.height = icon.size;
                
                // Draw icon on both canvases
                drawIcon(previewCanvas.getContext('2d'), 100, primaryColor, secondaryColor, style, encryptionDepth);
                drawIcon(downloadCanvas.getContext('2d'), icon.size, primaryColor, secondaryColor, style, encryptionDepth);
                
                // Add to preview
                previewItem.appendChild(previewCanvas);
                previewItem.innerHTML += `
                    <div style="font-weight: 600; margin: 5px 0;">${icon.name}</div>
                    <div class="icon-info">${icon.size}√ó${icon.size}px</div>
                `;
                
                preview.appendChild(previewItem);
                
                // Create download link
                const downloadItem = document.createElement('a');
                downloadItem.href = downloadCanvas.toDataURL('image/png');
                downloadItem.download = icon.name;
                downloadItem.className = 'download-item';
                downloadItem.innerHTML = `
                    <canvas width="32" height="32"></canvas>
                    <div class="download-info">
                        <div>${icon.name}</div>
                        <div>${icon.size}√ó${icon.size}px ‚Ä¢ PNG</div>
                    </div>
                `;
                
                // Draw mini preview
                const miniCanvas = downloadItem.querySelector('canvas');
                const miniCtx = miniCanvas.getContext('2d');
                drawIcon(miniCtx, 32, primaryColor, secondaryColor, style, encryptionDepth);
                
                downloadLinks.appendChild(downloadItem);
            });
            
            // Add structure info
            const structureInfo = document.createElement('div');
            structureInfo.style.gridColumn = '1 / -1';
            structureInfo.style.padding = '20px';
            structureInfo.style.background = 'rgba(0,0,0,0.3)';
            structureInfo.style.borderRadius = '10px';
            structureInfo.style.marginTop = '20px';
            structureInfo.innerHTML = `
                <strong>Directory Structure Created:</strong>
                <div style="font-family: monospace; font-size: 12px; margin-top: 10px; color: #aaa;">
                    Place all downloaded icons in: <code>assets/icons/</code>
                </div>
                <div style="font-size: 12px; color: #0d47a1; margin-top: 10px;">
                    ‚úÖ Icons include encrypted watermark patterns for security validation
                </div>
            `;
            
            downloadLinks.appendChild(structureInfo);
        }
        
        // Draw icon based on style
        function drawIcon(ctx, size, primaryColor, secondaryColor, style, depth) {
            // Clear canvas
            ctx.clearRect(0, 0, size, size);
            
            // Calculate colors
            const primary = hexToRgb(primaryColor);
            const secondary = hexToRgb(secondaryColor);
            
            // Draw based on style
            switch(style) {
                case 'shield':
                    drawShieldIcon(ctx, size, primary, secondary, depth);
                    break;
                case 'lock':
                    drawLockIcon(ctx, size, primary, secondary, depth);
                    break;
                case 'layers':
                    drawLayersIcon(ctx, size, primary, secondary, depth);
                    break;
                case 'modern':
                    drawModernIcon(ctx, size, primary, secondary, depth);
                    break;
                case 'classic':
                    drawClassicIcon(ctx, size, primary, secondary, depth);
                    break;
                case 'minimal':
                    drawMinimalIcon(ctx, size, primary, secondary, depth);
                    break;
            }
            
            // Add encrypted watermark
            addWatermark(ctx, size, depth);
        }
        
        // Draw shield icon
        function drawShieldIcon(ctx, size, primary, secondary, depth) {
            const center = size / 2;
            const radius = size * 0.4;
            
            // Create gradient
            const gradient = ctx.createLinearGradient(0, 0, size, size);
            gradient.addColorStop(0, `rgb(${primary.r}, ${primary.g}, ${primary.b})`);
            gradient.addColorStop(1, `rgb(${secondary.r}, ${secondary.g}, ${secondary.b})`);
            
            // Draw shield shape
            ctx.beginPath();
            ctx.moveTo(center, size * 0.15);
            ctx.bezierCurveTo(center - radius, size * 0.15, center - radius, center, center - radius * 0.7, center);
            ctx.quadraticCurveTo(center - radius * 0.7, center + radius * 0.8, center, size * 0.85);
            ctx.bezierCurveTo(center + radius * 0.7, center + radius * 0.8, center + radius * 0.7, center, center + radius, center);
            ctx.bezierCurveTo(center + radius, size * 0.15, center, size * 0.15, center, size * 0.15);
            ctx.closePath();
            
            // Fill with gradient
            ctx.fillStyle = gradient;
            ctx.fill();
            
            // Add depth layers
            for (let i = 0; i < depth; i++) {
                const layerRadius = radius * (0.8 - i * 0.1);
                ctx.beginPath();
                ctx.arc(center, center, layerRadius, 0, Math.PI * 2);
                ctx.strokeStyle = `rgba(255, 255, 255, ${0.1 + i * 0.05})`;
                ctx.lineWidth = 2;
                ctx.stroke();
            }
            
            // Draw lock inside
            drawLockSymbol(ctx, center, center, radius * 0.4, 'rgba(255, 255, 255, 0.9)');
        }
        
        // Draw lock icon
        function drawLockIcon(ctx, size, primary, secondary, depth) {
            const center = size / 2;
            const radius = size * 0.35;
            
            // Body gradient
            const gradient = ctx.createRadialGradient(center, center, 0, center, center, radius);
            gradient.addColorStop(0, `rgb(${primary.r}, ${primary.g}, ${primary.b})`);
            gradient.addColorStop(1, `rgb(${secondary.r}, ${secondary.g}, ${secondary.b})`);
            
            // Lock body
            ctx.beginPath();
            ctx.roundRect(center - radius * 0.8, center - radius * 0.5, radius * 1.6, radius * 1.2, radius * 0.3);
            ctx.fillStyle = gradient;
            ctx.fill();
            
            // Lock shackle
            ctx.beginPath();
            ctx.arc(center, center - radius * 0.3, radius * 0.4, Math.PI, 0);
            ctx.lineWidth = radius * 0.15;
            ctx.strokeStyle = gradient;
            ctx.stroke();
            
            // Keyhole
            ctx.beginPath();
            ctx.arc(center, center + radius * 0.2, radius * 0.15, 0, Math.PI * 2);
            ctx.rect(center - radius * 0.05, center + radius * 0.35, radius * 0.1, radius * 0.3);
            ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
            ctx.fill();
            
            // Add encryption layers
            for (let i = 0; i < depth; i++) {
                const layerRadius = radius * (0.9 - i * 0.1);
                ctx.beginPath();
                ctx.arc(center, center, layerRadius, 0, Math.PI * 2);
                ctx.strokeStyle = `rgba(255, 255, 255, ${0.05 + i * 0.03})`;
                ctx.lineWidth = 1;
                ctx.stroke();
            }
        }
        
        // Draw layers icon
        function drawLayersIcon(ctx, size, primary, secondary, depth) {
            const center = size / 2;
            
            // Draw concentric circles
            for (let i = depth; i > 0; i--) {
                const radius = size * 0.2 * i;
                const opacity = 0.2 + (i * 0.15);
                
                // Gradient for each layer
                const gradient = ctx.createRadialGradient(center, center, 0, center, center, radius);
                gradient.addColorStop(0, `rgba(${primary.r}, ${primary.g}, ${primary.b}, ${opacity})`);
                gradient.addColorStop(1, `rgba(${secondary.r}, ${secondary.g}, ${secondary.b}, ${opacity * 0.5})`);
                
                ctx.beginPath();
                ctx.arc(center, center, radius, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();
                
                // Outline
                ctx.strokeStyle = `rgba(255, 255, 255, ${opacity * 0.5})`;
                ctx.lineWidth = 2;
                ctx.stroke();
            }
            
            // Center lock symbol
            drawLockSymbol(ctx, center, center, size * 0.15, 'rgba(255, 255, 255, 0.9)');
        }
        
        // Helper: Draw lock symbol
        function drawLockSymbol(ctx, x, y, size, color) {
            // Lock body
            ctx.beginPath();
            ctx.roundRect(x - size * 0.4, y - size * 0.3, size * 0.8, size * 0.8, size * 0.2);
            ctx.fillStyle = color;
            ctx.fill();
            
            // Shackle
            ctx.beginPath();
            ctx.arc(x, y - size * 0.4, size * 0.4, Math.PI, 0);
            ctx.lineWidth = size * 0.15;
            ctx.strokeStyle = color;
            ctx.stroke();
            
            // Keyhole
            ctx.beginPath();
            ctx.arc(x, y + size * 0.1, size * 0.1, 0, Math.PI * 2);
            ctx.rect(x - size * 0.05, y + size * 0.2, size * 0.1, size * 0.2);
            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            ctx.fill();
        }
        
        // Add other icon styles similarly...
        // [Additional icon style functions would go here]
        
        // Add encrypted watermark
        function addWatermark(ctx, size, depth) {
            // Subtle encryption pattern
            ctx.save();
            ctx.globalAlpha = 0.03;
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 0.5;
            
            for (let i = 0; i < depth * 5; i++) {
                const x = Math.random() * size;
                const y = Math.random() * size;
                const length = size * 0.1;
                
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(x + length, y + length);
                ctx.stroke();
            }
            
            ctx.restore();
            
            // Security hash in corner (tiny)
            const hash = generateSecurityHash(size);
            ctx.font = `${Math.max(size * 0.02, 4)}px monospace`;
            ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.fillText(hash.substr(0, 4), 2, size - 2);
        }
        
        // Generate security hash
        function generateSecurityHash(seed) {
            let hash = '';
            const chars = '0123456789ABCDEF';
            for (let i = 0; i < 8; i++) {
                hash += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return hash;
        }
        
        // Hex to RGB
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : { r: 13, g: 71, b: 161 };
        }
        
        // Download all as ZIP
        function downloadAllIcons() {
            alert('In a production environment, this would generate a ZIP file with all icons.\n\nFor now, download each icon individually from the list below.');
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', generateAllIcons);
        
        // Add roundRect polyfill for older browsers
        if (!CanvasRenderingContext2D.prototype.roundRect) {
            CanvasRenderingContext2D.prototype.roundRect = function(x, y, width, height, radius) {
                if (width < 2 * radius) radius = width / 2;
                if (height < 2 * radius) radius = height / 2;
                
                this.beginPath();
                this.moveTo(x + radius, y);
                this.arcTo(x + width, y, x + width, y + height, radius);
                this.arcTo(x + width, y + height, x, y + height, radius);
                this.arcTo(x, y + height, x, y, radius);
                this.arcTo(x, y, x + width, y, radius);
                this.closePath();
                return this;
            };
        }
    </script>
</body>
</html>
